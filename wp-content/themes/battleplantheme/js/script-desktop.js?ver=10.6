document.addEventListener("DOMContentLoaded",function(){"use strict";(function(a){var b=site_dir.upload_dir_uri;if(a("body").hasClass("background-image")){var c=new Image;c.onload=function(){animateDiv(".parallax-mirror","fadeIn",0,"",200)},c.src=b+"/site-background.jpg"}window.parallaxBG=function(c,d,e,f,g,h,i,j){g=g||"center",h=h||"center",i=i||20,j=j||3;var k=a(c).outerHeight(),l=f/k/j;a(c).parallax({imageSrc:b+"/"+d,speed:l,bleed:i,naturalWidth:e,naturalHeight:f,positionX:g,positionY:h})},window.parallaxDiv=function(b,c){function d(){a(b).each(function(){if(0<a(this).find(c).length){var b=a(this).find(c),d=b.outerHeight(),e=a(this).outerHeight(),f=a(this).offset().top,g=a(window).height(),h=a(window).scrollTop(),i=h+g,j=(i-f)/(e+g);1<j&&(j=1),(0>j||null==j)&&(j=0);var k=(e-d)*j;f<i&&f+e>h&&b.css("margin-top",k+"px")}})}c=c||".parallax",window.addEventListener("scroll",function(){d()}),d()},window.magicMenu=function(b,c,d,e){b=b||"#desktop-navigation .menu",c=c||"active",d=d||"non-active",e=e||"false";var f,g,h,i,j,k,l=a(b),m=l.parent().parent(),n="horizontal";m.hasClass("widget")&&(n="vertical"),m.prepend("<div id='magic-line'></div>"),m.prepend("<div id='off-screen' class='"+n+"'></div>");var o=a("#magic-line"),p=a("#off-screen");if(g=l.find("li.current-menu-parent").length?l.find("li.current-menu-parent"):l.find("li.current-menu-item"),(!g.length||g.hasClass("mobile-only"))&&(g=p),g.find(">a").addClass(c),window.setMagicMenu=function(){"horizontal"==n?(i=Math.round(g.position().left+(g.outerWidth()-g.width())/2),h=Math.round(g.position().top),j=Math.round(g.width()),k=Math.round(o.data("origH"))):(i=Math.round(parseInt(g.parent().css("padding-left"))),h=Math.round(g.position().top),j=Math.round(o.data("origW")),k=Math.round(g.height())),o.css({transform:"translate("+i+"px, "+h+"px)",width:j,height:k}).data("origT",h).data("origL",i).data("origW",j).data("origH",k),o.delay(250).animate({opacity:1},0);var b=[],e=[],m=[],p=[];a("#desktop-navigation ul.main-menu > .menu-item, .widget-navigation .menu-item").each(function(){var c=a(this);"horizontal"==n?(b.push(Math.round(c.position().top)),e.push(Math.round(c.position().left+(c.outerWidth()-c.width())/2)),m.push(Math.round(c.width())),p.push(Math.round(o.data("origH")))):(b.push(Math.round(c.position().top)),e.push(Math.round(parseInt(c.parent().css("padding-left")))),m.push(Math.round(o.data("origW"))),p.push(Math.round(c.height())))}),l.find(" > li").hover(function(){f=a(this);var h=f.index();setTimeout(function(){o.css({transform:"translate("+e[h]+"px, "+b[h]+"px)",width:m[h],height:p[h]})},25),g.find(">a").removeClass(c).addClass(d),f.find(">a").addClass(c).removeClass(d)},function(){setTimeout(function(){o.css({transform:"translate("+o.data("origL")+"px, "+o.data("origT")+"px)",width:o.data("origW"),height:o.data("origH")})},25),f.find(">a").removeClass(c).addClass(d),g.find(">a").addClass(c).removeClass(d)})},"true"==e){var q,r,s,t=m.find(".flex").position().left,u=m.find(".flex").width(),v=g.position().left-t;m.find("li").mouseover(function(){v=a(this).position().left-t,magicColor(v)}),m.find(".flex").mouseout(function(){v=g.position().left-t,magicColor(v)}),window.magicColor=function(b){q=b+o.width()/2,r=q/u,s=o.position().left-t,.33>r?a("body").removeClass("menu-alt-2").removeClass("menu-alt-3").addClass("menu-alt-1"):.33<=r&&.66>r?a("body").removeClass("menu-alt-1").removeClass("menu-alt-3").addClass("menu-alt-2"):a("body").removeClass("menu-alt-1").removeClass("menu-alt-2").addClass("menu-alt-3"),q<=s?a("body").addClass("menu-dir-l").removeClass("menu-dir-r"):a("body").addClass("menu-dir-r").removeClass("menu-dir-l")},magicColor(v)}setTimeout(function(){setMagicMenu()},500),a(window).resize(function(){setMagicMenu()})},window.splitMenu=function(b,c,d){b=b||"#desktop-navigation",c=c||".logo img",d=d||0;var e=a(b).find(".flex"),f=a(b).find("ul.menu"),g=a(c).outerWidth()+d,h=f.width()/2,i=0;f.children().each(function(){i+=a(this).outerWidth(),i<h?a(this).addClass("left-menu"):a(this).addClass("right-menu")}),addDiv(e,"<div class=\"split-menu-r\"></div>","before"),addDiv(e,"<div class=\"split-menu-l\"></div>","before"),moveDiv(f,".split-menu-l","inside"),cloneDiv(f,".split-menu-r","inside"),a(".split-menu-l ul.menu").attr("id",a(".split-menu-l ul.menu").attr("id")+"-l"),a(".split-menu-r ul.menu").attr("id",a(".split-menu-r ul.menu").attr("id")+"-r"),a(".split-menu-l").find("li.right-menu").remove(),a(".split-menu-r").find("li.left-menu").remove(),e.css({"grid-column-gap":g+"px"})},window.addMenuLogo=function(b,c){c=c||"#desktop-navigation",a(c).addClass("menu-with-logo"),addDiv(".menu-with-logo","<div class=\"menu-logo\"><img src = \""+b+"\" alt=\"\"></div>","before"),a(".menu-with-logo .menu-logo").height(a(".menu-with-logo").height()),linkHome(".menu-logo")},window.desktopSidebar=function(b,c){window.checkHeights=function(){var c=a("#primary").outerHeight(),d=a(window).outerHeight(),e=a("#secondary .sidebar-inner").outerHeight()+parseInt(a("#secondary").css("padding-top"))+parseInt(a("#secondary").css("padding-bottom"))+b,f=c-e;return a("#wrapper-content").attr("data-primary",Math.round(c)).attr("data-viewport",Math.round(d)).attr("data-widgets",Math.round(e)).attr("data-remain",Math.round(f)),f},window.widgetInit=function(){0!=b&&a("#secondary").css({height:"calc(100% + "+b+"px)"}),a(".widget:not(.widget-important)").addClass("hide-widget"),addWidgets()},window.addWidgets=function(){a(".hide-widget:not(.remove-first):not(.hide-set)").each(function(){a(this).height()<=checkHeights()&&a(this).removeClass("hide-widget")}),a(".hide-widget:not(.remove-first)").each(function(){a(this).height()<=checkHeights()&&a(this).removeClass("hide-widget")}),a(".hide-widget").each(function(){a(this).height()<=checkHeights()&&a(this).removeClass("hide-widget")}),a(".widget:not(.hide-widget)").length||a("widget:first-of-type").removeClass("hide-widget"),checkHeights(),labelWidgets()},window.moveWidgets=function(){if("true"==c){var b,d,e=+a("#wrapper-content").attr("data-primary"),f=+a("#wrapper-content").attr("data-widgets"),g=+a("#wrapper-content").attr("data-viewport"),h=+a("#wrapper-content").attr("data-remain"),i=a("#primary").offset().top,j=+a(window).scrollTop(),k=j-i;j>i?(b=k/(e-g),d=h*b):d=0,a(".stuck").each(function(){g-=a(this).outerHeight()}),g-=a(".wp-google-badge").outerHeight(),f<g&&(d=k+parseInt(a("#secondary").css("padding-top"))),d>h&&(d=h),0>d&&(d=0),0<d&&d<h&&checkHeights(),a(".sidebar-inner").css({"margin-top":d+"px"})}}},a(window).on("load",function(){browserResize(!0)}),a(window).resize(function(){browserResize(!0)}),window.browserResize=function(b){b=b||!1,setTimeout(function(){a(window).trigger("resize.px.parallax"),!0==b&&widgetInit(),a("#secondary").length?window.addEventListener("scroll",moveWidgets):window.removeEventListener("scroll",moveWidgets)},300),a(".main-navigation ul.sub-menu").each(function(){var b=a(this).outerWidth(!0),c=a(this).parent().width(),d=-Math.round((b-c)/2);a(this).css({left:d+"px"})})},a(document).mousemove(function(){a("body").addClass("using-mouse").removeClass("using-keyboard")}),a(document).keydown(function(b){9!=b.keyCode||a("body").hasClass("using-mouse")||a("body").addClass("using-keyboard")}),a("iframe").each(function(){a(this).attr("aria-hidden",!0).attr("tabindex","-1")}),document.addEventListener("keydown",function(a){if(9===a.keyCode){for(var b=document.getElementsByClassName("tab-focus");b[0];)b[0].classList.remove("tab-focus");setTimeout(function(){var a=document.activeElement,b=a.closest(".menu-item");a.classList.add("tab-focus"),null==b?a.scrollIntoView({behavior:"smooth",block:"center"}):(b.classList.add("tab-focus"),a.scrollIntoView({behavior:"smooth",block:"nearest"}))},10)}}),document.addEventListener("mousedown",function(){var a,b=document.getElementsByClassName("tab-focus");if(b[0])for(a of b)a.classList.remove("tab-focus")})})(jQuery)});